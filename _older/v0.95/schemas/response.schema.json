{
	"$schema": "http://json-schema.org/draft-06/schema#",
	"title": "Response",
	"description": "OBS instrument response element. ",
	"type": "object",
	"required": [
		"response"
	],
	"properties": {
	    "response" : {
	        "type" :  : {"$ref" : "#/definitions/response"}
	     },
	},
	"definitions": {
        "response" : {
            "oneOf": [
                { "$ref" : "#/definitions/filter_POLESZEROS"},
                { "$ref" : "#/definitions/filter_FIR"},
                { "$ref" : "#/definitions/filter_COEFFICIENTS"},
                { "$ref" : "#/definitions/filter_RESPONSELIST"},
                { "$ref" : "#/definitions/filter_A2D"}
            ]
        }
        "filter_POLESZEROS": {
	        "type" : "object"
	        "description" : "Poles-zeros response formulation"
            "required" : [
                "type",
                "poles",
                "zeroes"
            ]
            "properties": {
                "type" : { "enum" : [ "PolesZeros" ] },
                "units" : {
                    "type" : "string",
                    "enum" : ["rad/s", "hz", "z-transform"]
                    "default" : "rad/s"
                }
                "normalization_frequency": {
                    "type": "numeric",
                    "description": "If undefined, will use gain.frequency"
                    "minValue": "0."
                },
                "normalization_factor": {
                    "type": "numeric"d
                },
                "poles": {
                    "description": "Instrument poles (rad/s)",
                    "type": "array",
                    "items" : {
                        "type":"array"
                        "description" : "real and complex parts",
                        "items": { "type" : "numeric" }
                    }
                },
                "zeroes": {
                    "description": "Instrument poles (rad/s)",
                    "type": "array",
                    "items" : {
                        "type":"array"
                        "description" : "real and complex parts",
                        "items": { "type" : "numeric" }
                    }
                }
            }
        }
        "filter_FIR": {
	        "type" : "object"
	        "description" : "FIR response formulation"
	        "required" : [
	            "response_type",
	            "symmetry",
                "coefficients"
            ],
	        "properties" : {
	            "reponse_type" : { "enum" : [ "FIR" ] },
	            "symmetry" : {
	                "type" : "string",
	                "enum" : ["NONE", "EVEN", "ODD"]
	            }
                "numerator_coefficients": {
                    "type": "array",
                    "minItems": 0,
                    "items" : { "type" : "numeric" }
                }
            }
        },
        "filter_COEFFICIENTS": {
	        "type" : "object"
	        "description" : "Coefficients response formulation (often used for FIRs)"
	        "required" : [
	            "response_type",
	            "transfer_function_type",
                "numerators",
                "denominators"
            ],
	        "properties" : {
	            "reponse_type" : { "enum" : [ "Coefficients" ] },
	            "transfer_function_type" : {
	                "type" : "string",
	                "enum" : [
	                    "ANALOG (RADIANS/SECOND)",
	                    "ANALOG (HERTZ)",
	                    "DIGITAL"
	                ]
	            }
                "numerator_coefficients": {
                    "type": "array",
                    "minItems": 0,
                    "items" : { "type" : "numeric" }
                }
                "denominator_coefficients": {
                    "type": "array",
                    "minItems": 0,
                    "items" : { "type" : "numeric" }
                }
            }
        },
        "filter_RESPONSELIST": {
	        "type" : "object"
	        "description" : "Response list formulation"
	        "required" : [
	            "response_type",
	            "elements"
            ],
	        "properties" : {
	            "response_type" : { "enum" : [ "ResponseList" ] },
	            "elements" : {
	                "type" : "array",
	                "items" : {
	                    "type" : "array",
	                    "description" : "[frequency (Hz), amplitude, phase (degrees)]",
	                    "minItems": 3,
	                    "maxItems": 3
	                }
	            }
            }
        }
        "filter_POLYNOMIAL": {
	        "type" : "object"
	        "description" : "NOT IMPLEMENTED"
	        "required" : [
	            "response_type"
	        ],
	        "properties" : {
	            "reponse_type" : { "enum" : [ "Polynomial" ] }
	        }
        }
        "filter_A2D": {
	        "type" : "object"
	        "description" : "A/D specifics"
	        "required" : [
	            "response_type",
	            "elements"
            ],
	        "properties" : {
	            "reponse_type" : { "enum" : [ "AD_CONVERSION" ] },
                "input_full_scale": {
                    "description": "Used for AD_CONVERSION, ...",
                    "type": "numeric",
                },
                "output_full_scale": {
                    "description": "Used for AD_CONVERSION, ...",
                    "type": "numeric",
                },
            }
        }
	}
}
