{
	"$schema": "http://json-schema.org/draft-04/schema#",
	"title": "Response",
	"description": "OBS instrument/stage response files. Stages will be ordered sensor -> ana_filter -> datalogger",
	"type": "object",
	"required": [ "response","format_version" ],
	"properties": {
	    "format_version" : {"$ref" : "#/format_version"},
	    "revision" :       {"$ref" : "definitions.schema.json#/revision"},
        "yaml_anchors" :   {"$ref" : "definitions.schema.json#/yaml_anchors"},
	    "notes" :          {"$ref" : "definitions.schema.json#/note_list"},
	    "extras" :         {"$ref" : "definitions.schema.json#/extras"},
	    "response" :       {"$ref" : "#/definitions/response" }
	},
	"additionalProperties" : false,
    "format_version" : {
        "anyOf": [
            {"$ref" : "definitions.schema.json#/format_version"},
            {"type": "string","pattern": "^0\\.107$","comment":"version of last change to this schema"}
        ]
    },
	"definitions": {
	    "response" : {
	        "type" : "object",
	        "description": "The Response Object (currently contains only stages)",
	        "required" : ["stages"],
	        "properties" : { 
	            "stages" : {"$ref" : "#/definitions/stage_list"},
		        "extras":  {"$ref" : "definitions.schema.json#extras" },
		        "notes":  {"$ref" : "definitions.schema.json#notes" },
                "decimation_info" : {"$ref" : "#/definitions/decimation_info"}
	         },
	        "additionalProperties" : false
	    },
        "decimation_info": {
            "type" : "object",
            "description" : "Decimation info",
            "properties" : { 
                "input_units":       { "$ref" : "stage.schema.json#/definitions/stage_io_units" },
                "output_units":      { "$ref" : "stage.schema.json#/definitions/stage_io_units" },
                "input_sample_rate": { "type" : "number",  "description": "DecimationType:InputSampleRate"},
                "output_sample_rate":{ "type" : "number",  "description": "DecimationType:OutputSampleRate"},
                "notes" :            {"$ref" : "definitions.schema.json#/note_list"}
            },
	        "additionalProperties" : false
        },
	    "stage_list" : {
	        "type" : "array",
	        "minItems": 1,
	        "description" : "list of response stages",
	        "items" : { "$ref" : "stage.schema.json#/definitions/stage" }
	    }
    }
}
